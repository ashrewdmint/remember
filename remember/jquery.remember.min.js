(function(f){var g={key_name:"jquery.remember",serialize:function(a){return f("<form></form>").append(a.children().clone()).serialize()},last:function(a){var b=a.data(this.key_name);b=b?b:this.serialize(a);a.data(this.key_name,b);return b},hasChanges:function(a){return this.last(a)!=this.serialize(a)},changes:function(a){var b=this.params_to_object(this.serialize(a)),d=this.params_to_object(this.last(a)),e=[];f.each(b,function(c,h){d[c]!=h&&e.push({name:c,value:h,element:f("[name="+c+"]")})});return e},
params_to_object:function(a){var b={};a=a.split("&");f.each(a,function(d,e){e=unescape(e).split("=");b[e[0]]=e[1]});return b},forget:function(a){return a.removeData(this.key_name)}};f.fn.remember=function(a){var b,d;b=[];if(typeof a=="undefined")a="reset";this.each(function(e,c){c=f(c);switch(a){case "reset":g.forget(c);b.push(g.last(c));break;case "changes":b.push(g.changes(c));break;case "hasChanges":b.push(g.hasChanges(c));break;case "forget":b.push(g.forget(c));break}});f.each(b,function(e,c){switch(a){case "changes":if(!d||
typeof d.length=="undefined")d=[];f.each(c,function(h,i){d.push(i)});break;case "hasChanges":if(typeof d!="boolean")d=false;if(c)d=true;break}});if(a=="reset"||a=="forget")return this;if(typeof d=="undefined")throw'Undefined method "'+a+'" for jquery plugin remember';return d}})(jQuery);
