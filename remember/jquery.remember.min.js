(function(f){var g={key_name:"jquery.remember",serialize:function(b){var a,c,e=[];b.find("[name]:input").each(function(){a=f(this);a.get(0).nodeName.toLowerCase();c=a.val()?a.val():a.text();a.attr("type")=="radio"&&!a.is(":checked")||e.push(escape(a.attr("name"))+"="+escape(c))});return e.join("&")},last:function(b){var a=b.data(this.key_name);a=a?a:this.serialize(b);b.data(this.key_name,a);return a},hasChanges:function(b){return this.last(b)!=this.serialize(b)},changes:function(b){var a=this.params_to_object(this.serialize(b)),
c=this.params_to_object(this.last(b)),e=[];fields=f.extend({},a,c);f.each(fields,function(d,h){c[d]!=a[d]&&e.push({name:d,value:h,element:f("[name="+d+"]")})});return e},params_to_object:function(b){var a={};b=b.split("&");f.each(b,function(c,e){e=unescape(e).split("=");a[e[0]]=e[1]});return a},forget:function(b){return b.removeData(this.key_name)}};f.fn.remember=function(b){var a,c;a=[];if(typeof b=="undefined")b="reset";this.each(function(e,d){d=f(d);switch(b){case "reset":g.forget(d);a.push(g.last(d));
break;case "changes":a.push(g.changes(d));break;case "hasChanges":a.push(g.hasChanges(d));break;case "forget":a.push(g.forget(d));break}});f.each(a,function(e,d){switch(b){case "changes":if(!c||typeof c.length=="undefined")c=[];f.each(d,function(h,i){c.push(i)});break;case "hasChanges":if(typeof c!="boolean")c=false;if(d)c=true;break}});if(b=="reset"||b=="forget")return this;if(typeof c=="undefined")throw'Undefined method "'+b+'" for jquery plugin remember';return c}})(jQuery);
